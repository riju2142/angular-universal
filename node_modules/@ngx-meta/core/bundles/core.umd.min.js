(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("@angular/platform-browser"),require("rxjs/Observable"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/observable/of")):"function"==typeof define&&define.amd?define(["@angular/core","@angular/platform-browser","rxjs/Observable","rxjs/add/observable/fromPromise","rxjs/add/observable/of"],e):"object"==typeof exports?exports["ngx-meta"]=e(require("@angular/core"),require("@angular/platform-browser"),require("rxjs/Observable"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/observable/of")):t["ngx-meta"]=e(t["@angular/core"],t["@angular/platform-browser"],t["rxjs/Observable"],t["rxjs/add/observable/fromPromise"],t["rxjs/add/observable/of"])})(this,function(t,e,a,i,r){return function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=6)}([function(t,e,a){"use strict";var i=a(2);a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n});var r=function(){function t(){}return t}(),n=function(){function t(t){void 0===t&&(t={pageTitlePositioning:i.a.PrependPageTitle,defaults:{}}),this.settings=t}return t.prototype.getSettings=function(){return this.settings},t}()},function(t,e,a){"use strict";var i=a(3),r=a(4),n=(a.n(r),a(8)),o=(a.n(n),a(9)),s=(a.n(o),a(11)),l=(a.n(s),a(10)),u=(a.n(l),a(2)),c=a(0),f=a(7);a.d(e,"a",function(){return p});var p=function(){function t(t,e,a){this.loader=t,this.title=e,this.meta=a,this.metaSettings=t.getSettings(),this.isMetaTagSet={}}return t.prototype.setTitle=function(t,e){var a=this;void 0===e&&(e=!1),(t?this.callback(t):o.Observable.of("")).subscribe(function(t){var i="";t?!e&&a.metaSettings.pageTitleSeparator&&a.metaSettings.applicationName?a.callback(a.metaSettings.applicationName).subscribe(function(e){i=e?a.getTitleWithPositioning(t,e):t,a.updateTitle(i)}):a.updateTitle(t):(a.metaSettings.defaults&&a.metaSettings.defaults.title?a.callback(a.metaSettings.defaults.title):o.Observable.of("")).subscribe(function(t){!e&&a.metaSettings.pageTitleSeparator&&a.metaSettings.applicationName?a.callback(a.metaSettings.applicationName).subscribe(function(e){i=e?a.getTitleWithPositioning(t,e):t,a.updateTitle(i)}):a.updateTitle(t)})})},t.prototype.setTag=function(t,e){var a=this;if("title"===t)throw new Error("Attempt to set "+t+" through 'setTag': 'title' is a reserved tag name. Please use 'MetaService.setTitle' instead.");e=e||(this.metaSettings.defaults&&this.metaSettings.defaults[t]?this.metaSettings.defaults[t]:""),("og:locale"!==t&&"og:locale:alternate"!==t?this.callback(e):o.Observable.of(e)).subscribe(function(e){a.updateTag(t,e)})},t.prototype.update=function(t,e){var a=this;if(e){if(e.disabled)return void this.update(t);this.setTitle(e.title,e.override),Object.keys(e).forEach(function(t){var i=e[t];if("title"!==t&&"override"!==t){if("og:locale"===t)i=i.replace(/-/g,"_");else if("og:locale:alternate"===t){var r=e["og:locale"];return void a.updateLocales(r,e[t])}a.setTag(t,i)}})}else{var i=this.metaSettings.defaults?this.metaSettings.defaults.title||this.metaSettings.applicationName:this.metaSettings.applicationName;this.setTitle(i,!0)}this.metaSettings.defaults&&Object.keys(this.metaSettings.defaults).forEach(function(t){var i=a.metaSettings.defaults[t];if(!(e&&(t in a.isMetaTagSet||t in e)||"title"===t||"override"===t)){if("og:locale"===t)i=i.replace(/-/g,"_");else if("og:locale:alternate"===t){var r=e?e["og:locale"]:void 0;return void a.updateLocales(r,i)}a.setTag(t,i)}});var r=((this.metaSettings.applicationUrl||"/")+t).replace(/(https?:\/\/)|(\/)+/g,"$1$2").replace(/\/$/g,"");this.setTag("og:url",r||"/")},t.prototype.callback=function(t){if(this.metaSettings.callback){var e=this.metaSettings.callback(t);return a.i(f.a)(e)?e:a.i(f.b)(e)?o.Observable.fromPromise(e):o.Observable.of(e)}return o.Observable.of(t)},t.prototype.getTitleWithPositioning=function(t,e){switch(this.metaSettings.pageTitlePositioning){case u.a.AppendPageTitle:return e+this.metaSettings.pageTitleSeparator+t;case u.a.PrependPageTitle:return t+this.metaSettings.pageTitleSeparator+e;default:throw new Error("Invalid pageTitlePositioning specified ["+this.metaSettings.pageTitlePositioning+"]!")}},t.prototype.updateTitle=function(t){this.title.setTitle(t),this.meta.updateTag({property:"og:title",content:t})},t.prototype.updateLocales=function(t,e){var a=this;(t=t||(this.metaSettings.defaults?this.metaSettings.defaults["og:locale"]:""))&&this.metaSettings.defaults&&(this.metaSettings.defaults["og:locale"]=t.replace(/_/g,"-")),this.meta.getTags('property="og:locale:alternate"').forEach(function(t){a.meta.removeTagElement(t)}),t&&e&&e.split(",").forEach(function(e){t.replace(/-/g,"_")!==e.replace(/-/g,"_")&&a.meta.addTag({property:"og:locale:alternate",content:e.replace(/-/g,"_")})})},t.prototype.updateTag=function(t,e){if(0===t.lastIndexOf("og:",0)?this.meta.updateTag({property:t,content:"og:locale"===t?e.replace(/-/g,"_"):e}):this.meta.updateTag({name:t,content:e}),this.isMetaTagSet[t]=!0,"description"===t)this.meta.updateTag({property:"og:description",content:e});else if("author"===t)this.meta.updateTag({property:"og:author",content:e});else if("publisher"===t)this.meta.updateTag({property:"og:publisher",content:e});else if("og:locale"===t){var a=this.metaSettings.defaults?this.metaSettings.defaults["og:locale:alternate"]:"";this.updateLocales(e,a),this.isMetaTagSet["og:locale:alternate"]=!0}else if("og:locale:alternate"===t){var i=this.meta.getTag('property="og:locale"').content;this.updateLocales(i,e),this.isMetaTagSet["og:locale"]=!0}},t}();p=i.a([a.i(r.Injectable)(),i.c("design:paramtypes",[c.a,n.Title,n.Meta])],p)},function(t,e,a){"use strict";a.d(e,"a",function(){return i});var i;(function(t){t[t.AppendPageTitle=0]="AppendPageTitle",t[t.PrependPageTitle=10]="PrependPageTitle"})(i||(i={}))},function(t,e,a){"use strict";function i(t,e,a,i){var r,n=arguments.length,o=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,a,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(n<3?r(o):n>3?r(e,a,o):r(e,a))||o);return n>3&&o&&Object.defineProperty(e,a,o),o}function r(t,e){return function(a,i){e(a,i,t)}}function n(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}e.a=i,e.b=r,e.c=n;Object.setPrototypeOf||Array,Object.assign},function(e,a){e.exports=t},function(t,e,a){"use strict";var i=a(3),r=a(4),n=(a.n(r),a(1));a.d(e,"a",function(){return o});var o=function(){function t(t){this.meta=t}return t.prototype.canActivate=function(t,e){var a=e.url,i=t&&t.data&&t.data.meta?t.data.meta:void 0;return this.meta.update(a,i),!0},t.prototype.canActivateChild=function(t,e){return this.canActivate(t,e)},t}();o=i.a([a.i(r.Injectable)(),i.c("design:paramtypes",[n.a])],o)},function(t,e,a){"use strict";function i(){return new s.b}Object.defineProperty(e,"__esModule",{value:!0});var r=a(3),n=a(4),o=(a.n(n),a(5)),s=a(0),l=a(1),u=a(2);a.d(e,"PageTitlePositioning",function(){return u.a}),a.d(e,"MetaGuard",function(){return o.a}),a.d(e,"MetaLoader",function(){return s.a}),a.d(e,"MetaStaticLoader",function(){return s.b}),a.d(e,"MetaService",function(){return l.a}),e.metaFactory=i,a.d(e,"MetaModule",function(){return c});var c=f=function(){function t(t){if(t)throw new Error("MetaModule already loaded; import in root module only.")}return t.forRoot=function(t){return void 0===t&&(t={provide:s.a,useFactory:i}),{ngModule:f,providers:[t,o.a,l.a]}},t}();c=f=r.a([a.i(n.NgModule)(),r.b(0,a.i(n.Optional)()),r.b(0,a.i(n.SkipSelf)()),r.c("design:paramtypes",[c])],c);var f},function(t,e,a){"use strict";function i(t){return!!t&&"function"==typeof t.then}function r(t){return!!t&&"function"==typeof t.subscribe}e.b=i,e.a=r},function(t,a){t.exports=e},function(t,e){t.exports=a},function(t,e){t.exports=i},function(t,e){t.exports=r}])});