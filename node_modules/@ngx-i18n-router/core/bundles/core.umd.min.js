(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core"),require("lodash"),require("@angular/router")):"function"==typeof define&&define.amd?define(["@angular/core","lodash","@angular/router"],e):"object"==typeof exports?exports["ngx-i18n-router"]=e(require("@angular/core"),require("lodash"),require("@angular/router")):t["ngx-i18n-router"]=e(t["@angular/core"],t.lodash,t["@angular/router"])})(this,function(t,e,r){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=7)}([function(t,e,r){"use strict";var n=r(5);r.n(n);r.d(e,"a",function(){return o}),r.d(e,"b",function(){return u});var o=function(){function t(){}return t}(),u=function(){function t(t,e){this.routes=t,this.translations=e}return t.prototype.loadTranslations=function(){return Promise.resolve(this.translations)},t.prototype.getRoutes=function(){return n.map(this.routes,n.cloneDeep)},t.prototype.getTranslations=function(){return this.translations},t}()},function(t,e,r){"use strict";function n(t,e,r){return t.useLocalizedRoutes?t.translateRoutes(e,r):e}var o=r(2),u=r(3),i=(r.n(u),r(6)),a=(r.n(i),r(5)),s=(r.n(a),r(0));r.d(e,"a",function(){return c}),r.d(e,"b",function(){return l}),e.c=n;var c="ROOT",l=function(){function t(t,e){this.loader=t,this.router=e,this.routes=a.map(this.loader.getRoutes(),a.cloneDeep)}return t.prototype.init=function(t){void 0===t&&(t=!0),t&&(this.useLocalizedRoutes=!0,this.translations=this.loader.getTranslations())},t.prototype.changeLanguage=function(t){if(this.useLocalizedRoutes&&this.translations[t]){this.languageCode=t;var e=this.loader.getRoutes(),r=a.find(e,function(t){return a.get(t,"data.i18n.isRoot",void 0)}),n=[];if(r){var o=this.translateRoute(r,"path").path||r.path;n=[{path:"",redirectTo:this.interpolateRoute(o),pathMatch:"full"}]}var u=this.translateRoutes(e);n=n.concat(u),this.router.resetConfig(n)}},t.prototype.getTranslation=function(t){return t=t.replace(/-/,"_"),a.get(this.translations,this.languageCode+"."+t.toUpperCase(),void 0)},t.prototype.translateRoutes=function(t,e){var r=this;void 0===e&&(e="");var n=[];return t.forEach(function(t){a.isArray(t.children)?(a.get(t,"data.i18n.isRoot",!1)?t.path=r.interpolateRoute(t.path):t.path&&(t=r.translateRoute(t,"path",e)),t.children=r.translateRoutes(t.children,e)):e||"**"!==t.path?(t.path&&(t=r.translateRoute(t,"path",e)),t.redirectTo&&(t=r.translateRoute(t,"redirectTo",e))):t.redirectTo=r.interpolateRoute(t.redirectTo),n.push(t)}),n},t.prototype.interpolateRoute=function(t){return t&&0!==t.length?(t=a.filter(t.split("/"),function(t){return!!t}).join("/"),this.languageCode+"/"+t):this.languageCode},t.prototype.translateRoute=function(t,e,r){var n=this;void 0===r&&(r="");var o=[],u="",i=a.filter(t[e].split("/"),function(t){return!!t}),s="redirectTo"===e&&a.startsWith(t[e],"/");return i.forEach(function(t,e){var i="",l=c+"."+(r&&!s?r+".":"")+t;0===e&&(i=n.getTranslation(l))&&(s&&o.push(n.languageCode),u=l),l=0===e?i?u:t:u+"."+t;var f=a.startsWith(t,":")?"":n.getTranslation(l);f&&(u=l),o.push(f||t)}),t[e]=o.join("/"),s&&(t[e]="/"+t[e]),t},t}();l=o.a([r.i(u.Injectable)(),o.c("design:paramtypes",[s.a,i.Router])],l)},function(t,e,r){"use strict";function n(t,e,r,n){var o,u=arguments.length,i=u<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(u<3?o(i):u>3?o(e,r,i):o(e,r))||i);return u>3&&i&&Object.defineProperty(e,r,i),i}function o(t,e){return function(r,n){e(r,n,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}e.a=n,e.b=o,e.c=u;Object.setPrototypeOf||Array,Object.assign},function(e,r){e.exports=t},function(t,e,r){"use strict";var n=r(2),o=r(3),u=(r.n(o),r(5)),i=(r.n(u),r(1));r.d(e,"a",function(){return a});var a=function(){function t(t){this.i18nRouter=t}return t.prototype.transform=function(t){if("string"==typeof t&&u.get(t,"length",0))throw new Error("Query must be an empty string or an array!");return this.i18nRouter.languageCode&&this.i18nRouter.useLocalizedRoutes?0===u.get(t,"length",0)?"/"+this.i18nRouter.languageCode:"/"+this.translateQuery(t):"/"+("string"==typeof t?t:t.join("/"))},t.prototype.translateQuery=function(t){var e=this,r=[],n="";return t.forEach(function(t,o){if("string"==typeof t){var u="",a=i.a+"."+t;0===o&&(u=e.i18nRouter.getTranslation(a))&&(n=a,r.push(e.i18nRouter.languageCode)),a=0===o?u?n:t:n+"."+t;var s=e.i18nRouter.getTranslation(a);s&&(n=a),r.push(s||t)}else r.push(t)}),r.join("/")},t}();a=n.a([r.i(o.Injectable)(),r.i(o.Pipe)({name:"i18nRouter",pure:!1}),n.c("design:paramtypes",[i.b])],a)},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e,r){"use strict";function n(t){return new c.b(t,{})}function o(t){return function(){return t.loadTranslations()}}function u(t){if(t)throw new Error("I18NRouterModule.forRoot() called twice. Child modules should use I18NRouterModule.forChild() instead.");return"guarded"}Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),a=r(3),s=(r.n(a),r(6)),c=(r.n(s),r(0)),l=r(4),f=r(1);r.d(e,"I18NRouterLoader",function(){return c.a}),r.d(e,"I18NRouterStaticLoader",function(){return c.b}),r.d(e,"I18NRouterPipe",function(){return l.a}),r.d(e,"ROOT_ROUTE_PREFIX",function(){return f.a}),r.d(e,"I18NRouterService",function(){return f.b}),r.d(e,"provideChildRoutes",function(){return f.c}),r.d(e,"RAW_ROUTES",function(){return p}),r.d(e,"I18N_ROUTER_PROVIDERS",function(){return d}),e.i18nRouterFactory=n,e.initializerFactory=o,r.d(e,"I18N_ROUTER_FORROOT_GUARD",function(){return R}),r.d(e,"MODULE_KEY",function(){return h}),r.d(e,"I18NRouterModule",function(){return g}),e.provideForRootGuard=u;var p=new a.InjectionToken("RAW_ROUTES"),d=[f.b],R=new a.InjectionToken("I18N_ROUTER_FORROOT_GUARD"),h=new a.InjectionToken("MODULE_KEY"),g=v=function(){function t(t){}return t.forRoot=function(t,e){return void 0===e&&(e=[{provide:c.a,useFactory:n,deps:[p]}]),{ngModule:v,providers:e.concat([{provide:a.APP_INITIALIZER,useFactory:o,deps:[c.a],multi:!0},{provide:p,useValue:t},{provide:R,useFactory:u,deps:[[s.Router,new a.Optional,new a.SkipSelf]]}])}},t.forChild=function(t,e){return{ngModule:v,providers:[r.i(s.provideRoutes)([]),{provide:p,useValue:t},{provide:h,useValue:e},{provide:s.ROUTES,useFactory:f.c,deps:[f.b,p,h],multi:!0},{provide:a.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:t,multi:!0}]}},t}();g=v=i.a([r.i(a.NgModule)({imports:[s.RouterModule],declarations:[l.a],exports:[l.a,s.RouterModule]}),i.b(0,r.i(a.Optional)()),i.b(0,r.i(a.Inject)(R)),i.c("design:paramtypes",[Object])],g);var v}])});